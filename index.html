<!DOCTYPE html>
<html lang="pt">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>AAP.Electroconversor</title>

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

<style>
body {
    margin: 0;
    font-family: Arial, sans-serif;
}

.fundo {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: url("fundo.jpeg") no-repeat center center;
    background-size: cover;
    opacity: 0.25;
    z-index: -1;
}

.card {
    border-radius: 20px;
}

.resultado {
    font-size: 1.2rem;
    font-weight: bold;
    color: #041b3eec;
}

.logo {
    height: 100px;
    border-radius: 10px;
    box-shadow: 0 6px 15px rgba(10, 1, 59, 0.25);
}

.app-title {
    font-size: 2rem;
    font-weight: 100;
    letter-spacing: 1px;
    color: #021939b9;
}
</style>
</head>

<body>

<div class="fundo"></div>

<div class="container py-5">
<div class="row justify-content-center">
<div class="col-lg-6 col-md-8">

<div class="card shadow p-4 bg-white">

<div class="position-relative mb-4">

<img src="LOGO.png" alt="Logo Empresa"
class="logo position-absolute start-0 top-50 translate-middle-y">

<div class="text-center">
<div class="app-title">AAP.Electroconversor</div>
</div>

</div>

<p class="text-center mb-4">Conversão de Cabos por Peso</p>

<!-- Tipo de Cabo -->
<div class="mb-3">
<label class="form-label">Tipo de Cabo</label>
<select class="form-select" id="tipoCabo">
<option value="">Selecionar...</option>
<option value="1.5">1.5 mm²</option>
<option value="2.5">2.5 mm²</option>
<option value="4">4 mm²</option>
<option value="6">6 mm²</option>
<option value="10">10 mm²</option>
</select>
</div>

<!-- Peso por metro -->
<div class="mb-3">
<label class="form-label">Peso por metro (kg)</label>
<input type="number" step="0.0001" class="form-control" id="pesoManual">
<small class="text-muted">
Preenchimento automático ao escolher bitola, mas pode alterar manualmente.
</small>
</div>

<!-- Preço (opcional) -->
<div class="mb-3">
<label class="form-label">Preço por metro (€) - opcional</label>
<input type="number" step="0.01" class="form-control" id="precoMetro">
</div>

<!-- Peso do pedaço -->
<div class="mb-3">
<label class="form-label">Peso por comprar</label>
<div class="input-group">
<input type="number" step="0.01" class="form-control" id="pesoPedaco">
<select class="form-select" id="unidadePeso">
<option value="kg">kg</option>
<option value="g">g</option>
</select>
</div>
</div>

<div class="d-grid gap-2">
<button class="btn btn-outline-secondary" onclick="limpar()">Limpar</button>
</div>

<hr>

<div class="resultado text-center mt-3">
<p id="resultadoMetros"></p>
<p id="resultadoPreco"></p>
</div>

</div>
</div>
</div>
</div>

<script>

const cabos = {
    "1.5": { peso: 0.019 },
    "2.5": { peso: 0.0304 },
    "4":   { peso: 0.044 },
    "6":   { peso: 0.065 },
    "10":  { peso: 0.1082 }
};

const tipoCabo = document.getElementById("tipoCabo");
const pesoManual = document.getElementById("pesoManual");
const precoMetro = document.getElementById("precoMetro");
const pesoPedaco = document.getElementById("pesoPedaco");
const unidadePeso = document.getElementById("unidadePeso");

function preencherPeso() {
    const tipo = tipoCabo.value;

    if (cabos[tipo]) {
        pesoManual.value = cabos[tipo].peso;
    }

    calcular();
}

function calcular() {

    let pesoPorMetro = parseFloat(pesoManual.value);
    let preco = parseFloat(precoMetro.value);
    let peso = parseFloat(pesoPedaco.value);
    let unidade = unidadePeso.value;

    if (!pesoPorMetro || pesoPorMetro <= 0 ||
        !peso || peso <= 0) {

        document.getElementById("resultadoMetros").innerHTML = "";
        document.getElementById("resultadoPreco").innerHTML = "";
        return;
    }

    if (unidade === "g") {
        peso = peso / 1000;
    }

    let metros = peso / pesoPorMetro;

    document.getElementById("resultadoMetros").innerHTML =
        "Comprimento: " + metros.toFixed(2) + " metros";

    if (preco && preco > 0) {
        let total = metros * preco;
        document.getElementById("resultadoPreco").innerHTML =
            "Preço Total: € " + total.toFixed(2);
    } else {
        document.getElementById("resultadoPreco").innerHTML =
            "Preço Total: Não inserido";
    }
}

function limpar() {
    tipoCabo.value = "";
    pesoManual.value = "";
    precoMetro.value = "";
    pesoPedaco.value = "";
    unidadePeso.value = "kg";
    document.getElementById("resultadoMetros").innerHTML = "";
    document.getElementById("resultadoPreco").innerHTML = "";
}

/* Eventos automáticos */
tipoCabo.addEventListener("change", preencherPeso);
pesoManual.addEventListener("input", calcular);
precoMetro.addEventListener("input", calcular);
pesoPedaco.addEventListener("input", calcular);
unidadePeso.addEventListener("change", calcular);

</script>

</body>
</html>
